<section class="py-24 px-8 bg-black text-white">
  <div class="flex justify-between items-end mb-12">
    <h2 class="text-4xl font-black uppercase tracking-tighter">
      {{ section.settings.title | default: 'Latest Drops' }}
    </h2>
    <a
      href="/collections/all"
      class="hidden md:block text-sm font-bold tracking-widest uppercase text-gray-500 hover:text-white transition-colors"
    >
      View All
    </a>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-16">
    {%- assign collection = section.settings.collection -%}

    {%- if collection != blank -%}
      {%- for product in collection.products limit: 4 -%}
        <a href="{{ product.url }}" class="group block">
          <div class="relative aspect-[3/4] overflow-hidden bg-gray-900 mb-6">
            {% if product.featured_image %}
              <img
                src="{{ product.featured_image | image_url: width: 600 }}"
                alt="{{ product.title }}"
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                loading="lazy"
              >
            {% endif %}

            <div class="absolute bottom-0 left-0 w-full p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-300">
              <button class="w-full bg-white text-black font-bold uppercase text-xs py-3 tracking-widest hover:bg-red-600 hover:text-white">
                Quick Add
              </button>
            </div>
          </div>

          <h3 class="text-lg font-bold uppercase tracking-wide group-hover:text-red-600 transition-colors">
            {{ product.title }}
          </h3>
          <p class="text-gray-500 font-mono text-sm mt-1">
            {{ product.price | money }}
          </p>
        </a>
      {%- endfor -%}

    {%- else -%}
      {%- for i in (1..4) -%}
        <div class="group block">
          <div class="aspect-[3/4] bg-gray-800 mb-6 flex items-center justify-center text-gray-600">
            {{ 'product-' | append: i | placeholder_svg_tag: 'w-1/2 h-1/2 opacity-20' }}
          </div>
          <h3 class="text-lg font-bold uppercase tracking-wide">Sample Product</h3>
          <p class="text-gray-500 font-mono text-sm mt-1">$120.00</p>
        </div>
      {%- endfor -%}
    {%- endif -%}
  </div>

  <div class="mt-12 md:hidden text-center">
    <a
      href="/collections/all"
      class="inline-block border border-gray-700 px-8 py-4 text-sm font-bold tracking-widest uppercase hover:border-white transition-colors"
    >
      View All Products
    </a>
  </div>
</section>

{% schema %}
{
  "name": "Product Grid",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Latest Drop"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    }
  ],
  "presets": [
    {
      "name": "Product Grid"
    }
  ]
}
{% endschema %}
